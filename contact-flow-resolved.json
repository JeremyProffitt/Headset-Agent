{
  "Version": "2019-10-30",
  "StartAction": "setVoice",
  "Metadata": {
    "EntryPointPosition": {"x": 40, "y": 40},
    "ActionMetadata": {
      "setVoice": {"Position": {"x": 150, "y": 40}},
      "lexBot": {"Position": {"x": 350, "y": 40}},
      "goodbye": {"Position": {"x": 950, "y": 40}},
      "retry1": {"Position": {"x": 350, "y": 150}},
      "lexBot2": {"Position": {"x": 550, "y": 150}},
      "retry2": {"Position": {"x": 550, "y": 250}},
      "lexBot3": {"Position": {"x": 750, "y": 250}},
      "finalError": {"Position": {"x": 750, "y": 350}}
    }
  },
  "Actions": [
    {
      "Identifier": "setVoice",
      "Type": "UpdateContactTextToSpeechVoice",
      "Parameters": {
        "TextToSpeechVoice": "Joanna",
        "TextToSpeechEngine": "Neural"
      },
      "Transitions": {
        "NextAction": "lexBot",
        "Errors": [{"NextAction": "lexBot", "ErrorType": "NoMatchingError"}],
        "Conditions": []
      }
    },
    {
      "Identifier": "lexBot",
      "Type": "ConnectParticipantWithLexBot",
      "Parameters": {
        "Text": "Welcome to headset support. How can I help you today?",
        "LexV2Bot": {
          "AliasArn": "arn:aws:lex:us-east-1:759775734231:bot-alias/M9VBE9T4ET/5DQOYNPTPM"
        },
        "LexTimeoutSeconds": {
          "Text": "120"
        }
      },
      "Transitions": {
        "NextAction": "goodbye",
        "Errors": [
          {"NextAction": "retry1", "ErrorType": "NoMatchingError"},
          {"NextAction": "retry1", "ErrorType": "InputTimeLimitExceeded"},
          {"NextAction": "retry1", "ErrorType": "NoMatchingCondition"}
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "retry1",
      "Type": "MessageParticipant",
      "Parameters": {
        "Text": "I'm sorry, I didn't quite catch that. Could you please describe your headset issue again?"
      },
      "Transitions": {
        "NextAction": "lexBot2",
        "Errors": [{"NextAction": "lexBot2", "ErrorType": "NoMatchingError"}],
        "Conditions": []
      }
    },
    {
      "Identifier": "lexBot2",
      "Type": "ConnectParticipantWithLexBot",
      "Parameters": {
        "LexV2Bot": {
          "AliasArn": "arn:aws:lex:us-east-1:759775734231:bot-alias/M9VBE9T4ET/5DQOYNPTPM"
        },
        "LexTimeoutSeconds": {
          "Text": "120"
        }
      },
      "Transitions": {
        "NextAction": "goodbye",
        "Errors": [
          {"NextAction": "retry2", "ErrorType": "NoMatchingError"},
          {"NextAction": "retry2", "ErrorType": "InputTimeLimitExceeded"},
          {"NextAction": "retry2", "ErrorType": "NoMatchingCondition"}
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "retry2",
      "Type": "MessageParticipant",
      "Parameters": {
        "Text": "Let me try one more time. What problem are you having with your headset?"
      },
      "Transitions": {
        "NextAction": "lexBot3",
        "Errors": [{"NextAction": "lexBot3", "ErrorType": "NoMatchingError"}],
        "Conditions": []
      }
    },
    {
      "Identifier": "lexBot3",
      "Type": "ConnectParticipantWithLexBot",
      "Parameters": {
        "LexV2Bot": {
          "AliasArn": "arn:aws:lex:us-east-1:759775734231:bot-alias/M9VBE9T4ET/5DQOYNPTPM"
        },
        "LexTimeoutSeconds": {
          "Text": "120"
        }
      },
      "Transitions": {
        "NextAction": "goodbye",
        "Errors": [
          {"NextAction": "finalError", "ErrorType": "NoMatchingError"},
          {"NextAction": "finalError", "ErrorType": "InputTimeLimitExceeded"},
          {"NextAction": "finalError", "ErrorType": "NoMatchingCondition"}
        ],
        "Conditions": []
      }
    },
    {
      "Identifier": "finalError",
      "Type": "MessageParticipant",
      "Parameters": {
        "Text": "I'm having trouble understanding you. Please try calling back later or visit our website for help. Thank you for calling headset support."
      },
      "Transitions": {
        "NextAction": "goodbye",
        "Errors": [{"NextAction": "goodbye", "ErrorType": "NoMatchingError"}],
        "Conditions": []
      }
    },
    {
      "Identifier": "goodbye",
      "Type": "DisconnectParticipant",
      "Parameters": {},
      "Transitions": {}
    }
  ]
}
